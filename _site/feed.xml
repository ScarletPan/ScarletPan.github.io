<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
<title type="text">My SCARLET</title>
<generator uri="https://github.com/mojombo/jekyll">Jekyll</generator>
<link rel="self" type="application/atom+xml" href="/feed.xml" />
<link rel="alternate" type="text/html" href="" />
<updated>2017-04-29T10:00:51+00:00</updated>
<id>/</id>
<author>
  <name>Haojie PAN</name>
  <uri>/</uri>
  <email>3140102237@zju.edu.cn</email>
</author>


<entry>
  <title type="html"><![CDATA[第一次参加Kaggle拿银总结]]></title>
 <link rel="alternate" type="text/html" href="/summary-of-get-a-silver-medal-in-kaggle/" />
  <id>/summary-of-get-a-silver-medal-in-kaggle</id>
  <published>2017-04-28T00:00:00+00:00</published>
  <updated>2017-04-28T00:00:00+00:00</updated>
  <author>
    <name>Haojie PAN</name>
    <uri></uri>
    <email>3140102237@zju.edu.cn</email>
  </author>
  <content type="html">
    &lt;blockquote&gt;
&lt;p&gt;在这篇博客开始之前，我必须感谢@&lt;a href=&quot;http://www.cad.zju.edu.cn/home/dengcai/&quot;&gt;Prof. Cai&lt;/a&gt;
给我提供服务器资源，@&lt;a href=&quot;http://fenixlin.github.io&quot;&gt;fenixlin&lt;/a&gt;
学长从他自身经验出发耐心地为我解答一些困惑，素未谋面的@&lt;a href=&quot;https://dnc1994.com&quot;&gt;dnc1994&lt;/a&gt;学长的一篇非常优秀的&lt;a href=&quot;https://dnc1994.com/2016/04/rank-10-percent-in-first-kaggle-competition/&quot;&gt;博文&lt;/a&gt;帮助入门，
以及广大Kaggler的无私分享，我确实在Kaggle举行的这场&lt;a href=&quot;https://www.kaggle.com/c/two-sigma-connect-rental-listing-inquiries&quot;&gt;Rental Listing Inquiries&lt;/a&gt;
比赛中收益良多，获得了不少知识。作为一个大三学生第一次参加，获得了Top 5%的成绩已经让我非常满意了。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;../images/RLI-rank.png&quot;/&gt;
&lt;p&gt;&lt;/p&gt;
&amp;emsp;&amp;emsp;这篇文章的目的是介绍自己第一次参加Kaggle的心历路程，总结遇到的问题和解决思路，为自己以后参赛做准备。同时这篇文章也可以作为一个初学者的入门Kaggle的参考，如果想要在入门kaggle的时候拿到一个好的名次，可以参考我的一些方法实践。本文可以随意转载，但务必&lt;strong&gt;注明出处和作者&lt;/strong&gt;, 并且发邮件(myscarlet@sina.com)通知与我。&lt;/p&gt;

&lt;h3&gt;&amp;emsp;目录&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#1&quot;&gt;初识Kaggle&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#2&quot;&gt;Step 1: 数据探索和可视化（EDA）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#3&quot;&gt;Step 2: 提取基础特征+模型训练&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#4&quot;&gt;Step 3: 跑出一个能提交的结果&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#5&quot;&gt;Step 4: 特征工程（FE）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#6&quot;&gt;Step 5: 模型调参（Grid Search）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#7&quot;&gt;Step 6: 模型融合&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#8&quot;&gt;Tricks&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#9&quot;&gt;总结&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;1&quot;&gt; 初识Kaggle &lt;/h2&gt;&lt;/h3&gt;

&lt;h4&gt;什么是Kaggle&lt;/h4&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;从刚接触machine learning的时候就有在学长口中、博文中、社区中听到过它的名字，当初我对它的理解还比较浮浅，只是知道是一个数据比赛的平台，有很多公开的数据集，比如大二寒假做的第一个ML练手项目就是一个用word2vec进行情感分析的Tutorial级&lt;a href=&quot;https://www.kaggle.com/c/word2vec-nlp-tutorial/data&quot;&gt;比赛&lt;/a&gt;，并且写了一个&lt;a href=&quot;http://o6qr23o6z.bkt.clouddn.com/paper%20for%20sentiment%20analysis.pdf&quot;&gt;research report&lt;/a&gt;。就只用到了教程和数据集。
&lt;p&gt;&amp;emsp;&amp;emsp;后来重新接触Kaggle才发现，它的价值所在是各种高质量的比赛，以及每场比赛下面的社区讨论（包括比赛中的分享、答疑，和比赛后的top solution分享），因此如果想要获得关于数据挖掘，机器学习实战经验的话，打一场kaggle比赛绝对是一个高回报的工作。&lt;/p&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;因为还是学生，不知道kaggle比赛究竟是否会为自己求职工作有举足轻重的影响，但是单从Kaggle被google收购一点来看，它会在行业内一点点提升影响力的。&lt;/p&gt;&lt;/p&gt;

&lt;h4&gt;比赛组织&lt;/h4&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;一场比赛通常持续2～3个月，在比赛的简介中会有规则、评价指标（比如这场比赛为mlogloss），时间轴等信息。另外还有数据区、Kernel区（一些Kagglers在kaggle上成功运行的ipython notebook或者代码），Discussion（讨论区），LeaderBoard（LB，分为公开的用户提交可以显示结果的榜单，和非公开的比赛结束后确定最终排名的榜单），当然还有提交区（一般为一定格式的csv文件提交）。
&lt;p&gt;&amp;emsp;&amp;emsp;另外就是奖牌问题，一般来讲在1000+量级的比赛中，top 10+ 0.2%为金牌，5%为银牌，10%为铜牌，&lt;a href=&quot;https://www.kaggle.com/progression&quot;&gt;这里&lt;/a&gt;有更具体的奖牌发放方式。&lt;/p&gt;&lt;/p&gt;

&lt;h4&gt;讨论区&lt;/h4&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;个人认为，如果想在入门Kaggle阶段就获得一个好的成绩的话，关注discussion是非常重要的，会有很多人分享自己的思路、困惑甚至代码和结果。有时候，一场比赛中比较关键的feature可能就是从讨论区中获得的，比如&lt;a href=&quot;https://www.kaggle.com/c/two-sigma-connect-rental-listing-inquiries&quot;&gt;Rental Listing Inquiries&lt;/a&gt;这场比赛的最后几天，我以为自己特征提取得已经差不多了，没有任何idea了的时候，一个来自讨论区magic feature从天而降，从而使得榜单大变，一夜之间我的排名从70多掉到了120多。&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;2&quot;&gt; 数据探索和可视化（EDA） &lt;/h2&gt;&lt;/h3&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;首先拿到一个比赛题目，你需要下决心是否参加这个比赛，对我个人而言最重要的无非两点1. 是不是有rank point，也就是奖牌， 2. 数据集是否令我满意。 因此对数据的探索首先需要你从Kaggle网站上查看数据的简介，并把数据下载下来。比如&lt;a href=&quot;https://www.kaggle.com/c/two-sigma-connect-rental-listing-inquiries&quot;&gt;Rental Listing Inquiries&lt;/a&gt;包含了80G的图片数据，和几份json文件。
&lt;p&gt;&amp;emsp;&amp;emsp;我们将下载下来的train.csv用python pandas 打开，取少量样本进行观测&lt;/p&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pandas&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pd&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;train&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read_json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;input/train.json&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;In&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;train&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sample&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;../images/kaggle_RLI_data1.png&quot;/&gt;
&lt;p&gt;
&lt;img src=&quot;../images/kaggle_RLI_data2.png&quot;/&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;抛开图片数据不谈，我们可以看到给定的数据里包含多种多样的feature：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;数值型feature

&lt;ul&gt;
&lt;li&gt;bathrooms&lt;/li&gt;
&lt;li&gt;bedrooms&lt;/li&gt;
&lt;li&gt;price&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;高势集类别（High Categorical）型feature

&lt;ul&gt;
&lt;li&gt;building_id&lt;/li&gt;
&lt;li&gt;display_address&lt;/li&gt;
&lt;li&gt;manager_id&lt;/li&gt;
&lt;li&gt;street_address&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;时间型feature

&lt;ul&gt;
&lt;li&gt;created&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;地理位置型feature

&lt;ul&gt;
&lt;li&gt;longitude&lt;/li&gt;
&lt;li&gt;latitude&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;文本feature

&lt;ul&gt;
&lt;li&gt;description&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;稀疏特征集feature

&lt;ul&gt;
&lt;li&gt;features&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;id型feature

&lt;ul&gt;
&lt;li&gt;listing_id&lt;/li&gt;
&lt;li&gt;index&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;我们看到有这么多不同的feature，一看几乎每个feature都有深度挖掘的价值，何况还有80G的图片feature，无疑是让人兴奋的，因此我选择了这个比赛，因为它的数据集的确让我舒心。&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;另外一定要搞明白的一件事是这场比赛是一个预测比赛还是分类比赛，我们能看到最重要预测的是用户的interest_level，分为low，medium，high三级，很显然是个分类问题了。&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;接下来的是就是对数据进行可视化探索了，我因为是初期参赛的，所以自己做了一份可视化方案，从中可以发现很多有趣的分布、outlier等。在这里推荐三份在比赛中分享出来的比较好的EDA：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.kaggle.com/sudalairajkumar/two-sigma-connect-rental-listing-inquiries/simple-exploration-notebook-2-connect&quot;&gt;Simple Exploration Notebook&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.kaggle.com/poonaml/two-sigma-connect-rental-listing-inquiries/two-sigma-renthop-eda&quot;&gt;Two Sigma RentHop EDA&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.kaggle.com/neviadomski/two-sigma-connect-rental-listing-inquiries/data-exploration-two-sigma-renthop&quot;&gt;Data Exploration Two Sigma Renthop&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;一般的比赛初期就会有人共享出他的数据可视化方案，因此如果是新手的话，初期不必浪费时间在这上面，因为从别人的kernel中就能发现很多东西了。&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;然而，需要强调的是，EDA的过程并不是在初期进行后以后都不做了，在以后的不断找新的feature的时候，EDA会给予你灵感。本人的一个关键feature就是在后期重新做了一些可视化后获得的。&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;3&quot;&gt; 提取基础特征+模型训练 &lt;/h2&gt;&lt;/h3&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;有了之前数据探索的基础，我们很快能提取到一些基础的feature，比如数值型feature进行简单的加减乘除，类别型feature用id顺序编码，稀疏特征集用one-hot编码，时间特征生成年、月、日等。将一些基础的特征转换成相应的输入input_X矩阵后，再将label也转换成数值形式：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;target_num_map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;high&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&#39;medium&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&#39;low&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;interest_level&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;target_num_map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;懂机器学习的人都知道，有了这些(X，y)对，我们就可以进行模型训练了。&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;我们用cross-validation（CV）的成绩来判断我们本地的实验结果，也就是将（X，y）训练集拆分成训练和验证集，训练相应分类器对训练集拟合，再在验证集上进行loss的计算来评估模型的好坏。&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;常见的分类器有Logistic Classifier，SVM， NN softmax，Random Forest等。但是在kaggle上用的比较多的还是一些封装好的库，如sklearn里的各种分类器，大名鼎鼎的xgboost，最近崭露头角的lightgbm等。&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;早就听闻xgboost的好用，我就直接在电脑上pip了xgboost，作为我接下来一两个月以来的核心分类器。将原先的（X，y）对中的训练部分输入xgboost进行fit，然后用验证部分predict计算mlogloss。&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;至此为止，比赛初期的第一个模型就已经训练好了。&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;4&quot;&gt; 跑出一个能提交的结果 &lt;/h2&gt;&lt;/h3&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;训练完一个比较好的模型之后，就可以对测试集进行预测了，首先将训练集（X，y）对输入xgboost中重新训练，然后对测试集也像对训练集一样进行特征处理，预测出来的结果按照比赛指定的格式保存到文件（在这里还是建议用pandas），即可提交。&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;第一次提交意味着你正式进入比赛，提交的结果会在Leader Board上显示你当前的排名，当然这个排名只起到参考作用，因为你提交上去的大部分结果kaggle都没有进行评估。&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;5&quot;&gt; 特征工程（FE） &lt;/h2&gt;&lt;/h3&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;在一系列的初始操作以后，你就要踏上FE的漫漫长征了。本人断断续续在数据清洗、特征提取上做了约两个多月，在比赛最后一段时间模型融合完毕后还在继续地寻找、测试新的特征。后期评论区中magic feature的出现，让每个人的预测结果好了0.01～0.02个点。不得不说，特征工程才是Kaggle比赛获胜的关键所在，因此初学者耗费大量精力在这上面是没错的。而本博文也是重点想讲一下自己发现新特征的一些心历路程。
&lt;p&gt;&amp;emsp;&amp;emsp;在对一些基础的特征进行生成之后，我开始了漫长地测试特征的长征路，测试的思路我后来发现并不是很好，因为是通过新增加一个或几个feature，如果cv分数上去了，就增加这个feature，如果cv分数没有上去，就舍弃这个feature，也就是相当于贪心验证。这样做的弊处在于，如果之前被舍弃的feature和之后被舍弃的feature联合在一起才会有正面影响，就相当于你错过了两个比较好的feature。因此特征的选择和联合显得非常关键。&lt;/p&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;在比赛阶段，花费大量力气去创建一个feature，到头来却选择放弃这个feature的事情很常见，我后期的特征有很多是新添加的，旧有的一些特征并没有保留。接下来就让我总结一下这场比赛中有哪些“好”的feature，为以后的比赛提供灵感和经验。&lt;/p&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;数值型feature的简单加减乘除&lt;/strong&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;这个乍一看仿佛没有道理可言，但是事实上却能挖掘出几个feature之间的内在联系，比如这场比赛中提供了bathrooms和bedrooms的数量，以及价格price，合租用户可能会更关心每个卧室的价格，即&lt;code&gt;bathrooms / price&lt;/code&gt;，也会关心是不是每个房间都会有一个卫生间&lt;code&gt;bathrooms / price&lt;/code&gt;，这些数值型feature之间通过算数的手段建立了联系，从而挖掘出了feature内部的一些价值，分数也就相应地上去了。&lt;/p&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;高势集类别&lt;/strong&gt;（High Categorical）进行经验贝叶斯转换成数值feature
&lt;p&gt;&amp;emsp;&amp;emsp;什么是High Categorical的特征呢？一个简单的例子就是邮编，有100个城市就会有好几百个邮编，有些房子坐落在同一个邮编下面。很显然随着邮编的数量增多，如果用简单的one-hot编码显然效果不太好，因此有人就用一些统计学思想（经验贝叶斯）将这些类别数据进行一个map，得到的结果是数值数据。在这场比赛中有人分享了一篇&lt;a href=&quot;http://helios.mm.di.uoa.gr/%7Erouvas/ssi/sigkdd/sigkdd.vol3.1/barreca.ps&quot;&gt;paper&lt;/a&gt;里面就提到了具体的算法。详细就不仔细讲了，用了这个encoding之后，的确效果提升了很多。那么这场比赛中哪些数据可以进行这样的encoding呢，只要满足下面几点：1. 会重复，2. 根据相同的值分组会分出超过一定数量（比如100）的组。也就是说building_id, manager_id, street_address, display_address都能进行这样的encoding，而取舍就由最后的实验来决定了。 &lt;/p&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;时间特征&lt;/strong&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;针对于时间数据来讲，提取年、月、日、星期等可能还是不够的，有另外一些points可以去思考，用户的兴趣跟发布时间的久远是否有关系？可以构造如下的feature来进行测试：
&lt;code&gt;python
data[&amp;quot;latest&amp;quot;] = (data[&amp;quot;created&amp;quot;]- data[&amp;quot;created&amp;quot;].min())
&lt;/code&gt;
&lt;code&gt;python
data[&amp;quot;passed&amp;quot;] = (data[&amp;quot;created&amp;quot;].max()- data[&amp;quot;created&amp;quot;])
&lt;/code&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;可以看到latest指的是从有数据开始到该房创建为止一共过去了多少时间，而passed则是该房记录创建为止到最后有记录的时候一共过去了多少时间。&lt;/p&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;另外针对于时间特征还可以用可视化的方式来与其他特征建立联系，比如我们观察listing_id与时间变化到底有怎样的联系，能够绘制出如下的图来：&lt;/p&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;../images/kaggle_RLI_data3.png&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp; 可能简单的相除就能获得很好的结果&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;地理位置特征&lt;/strong&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;想到地理位置，就会想到聚类，一个简单的方式将每个房子划分到同一块区域中去；除了聚类以外，算出几个中心点坐标，计算曼哈顿距离或者欧式距离可能都会有神奇的效果。&lt;/p&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;文本特征&lt;/strong&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;实话说自己是看中这次比赛中有文本数据才参加的，因此在文本挖掘中做了很大的努力，比如提取关键词、情感分析、word embedding聚类之类都尝试过，但效果都不是很好, 对于文本的特征的建议还是去找出一些除了停用词以外的高频词汇，寻找与这个房屋分类问题的具体联系。&lt;/p&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;图片特征&lt;/strong&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;除了最后爆料出来的magic feature(后文会提到)以外，我只用了一个房子有几个照片这个信息。讨论区中都说对于图片特征用CNN提取、简单特征提取之类的效果都不是很好。&lt;/p&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;稀疏特征集&lt;/strong&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;其实就相当于一系列标签，不同标签的个数也是挺多的，本次比赛我只是简单地采用了counterEncoding的方式进行one-hot编码。值得一提的是，有些标签是可以合并的，比如cat allowed 和 dog allowed可以合并成为 pet allowed，我在这场比赛中手工地合并了一些feature数据，最终结果略微有所提升。&lt;/p&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;特征重要程度&lt;/strong&gt;（feature importance）
&lt;p&gt;&amp;emsp;&amp;emsp;在树结构的分类器比如randomforest、xgboost中最后能够对每个特征在分类上面的重要程度进行一个评估。这时候如果已经选定了一些feature进行训练了之后，查看feature importance的反馈是非常重要的，比如本场比赛制胜的关键是运用manager_id这个feature，而它的feature importance反馈结果也是非常高。通过对重要特征的重新再提取特征，能够发现很多有意思的新特征，这才是用FE打好一场比赛的关键所在。&lt;/p&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;下面列出了一些比赛结束后获胜者分享的idea，这大概是我这场比赛中获益最大的一块地方了。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Top #1 &lt;a href=&quot;https://www.kaggle.com/c/two-sigma-connect-rental-listing-inquiries/discussion/32163&quot;&gt;solution&lt;/a&gt; @plantsgo
&lt;p&gt; &amp;emsp;&amp;emsp;主要是针对manager_id生成了非常多的feature。如根据不同时间出现的manager_id判断一个manager是否活跃（manager与time进行group，manager掌管有几个不同的房子（manager与building_id进行group）、平均每天处理多少房子（比值）、活动范围（同个manager掌管的房子的最大最小经纬度group），经理的开价程度（选择bedroom和bathroom作为房子型号指标，把相同房型的均价来衡量经理对于所有房子的开价程度），对经纬度进行聚类再计算每个区域中有多少个manager竞争、一个manager同时经营几个区域、在同个区域中manager的开价水平等。从Top 1选手分享的代码来看，其对于manager的各种处理的确是让人大开眼界。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;Top #2 &lt;a href=&quot;https://www.kaggle.com/c/two-sigma-connect-rental-listing-inquiries/discussion/32148&quot;&gt;solution&lt;/a&gt; @Faron
&lt;p&gt; &amp;emsp;&amp;emsp;从更为经验老道的选手给出了一些特征提取建议。其中有一类被作者称为&amp;quot;Likelihood Features&amp;quot;，他对High Cardinal Categorical的特征用了一些额外的条件概率来计算其似然值，如p(y|manager_id, bathrooms)等，并且进行了点积操作来计算出一个合适的encoding值（类似于先前讨论区中出现的manager_skills，同时为了防止过拟合对这些似然估计出来的feature创建了2层嵌套。另外还有一种对我启发比较大的feature是对description出现频率最高的15k单词进行一个one-hot深度xgboost训练，将这个训练出来模型的预测结果作为description的encoding。&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;Top #3 &lt;a href=&quot;https://www.kaggle.com/c/two-sigma-connect-rental-listing-inquiries/discussion/32123&quot;&gt;solution&lt;/a&gt; @Little Boat
&lt;p&gt; &amp;emsp;&amp;emsp;其FE的第一部分给出了group的一套方案，类似于我自己FE中的group方法。第二部分使用了magic feature相关的feature，方法与第一部分类似&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Top #9 &lt;a href=&quot;https://www.kaggle.com/c/two-sigma-connect-rental-listing-inquiries/discussion/32146&quot;&gt;solution&lt;/a&gt; @James Trotman
&lt;p&gt; &amp;emsp;&amp;emsp;没有细说，但是列出了一个feature name的详单，希望以后没有idea的时候能从中找到一些insight&lt;/p&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Top #11 &lt;a href=&quot;https://www.kaggle.com/c/two-sigma-connect-rental-listing-inquiries/discussion/32116&quot;&gt;solution&lt;/a&gt; @KazAnova
&lt;p&gt; &amp;emsp;&amp;emsp;KazAnova无疑是这场比赛中的明星选手，他分享了对初学者模型融合比较关键的StackNet，以及对最后榜单变动起到决定性作用的magic feature。几乎所有在榜上的Kagglers都要向他致敬。同时在FE这一块，他注意到了数据集中存在很多类似的数据（仅仅在价格上有区别），因此他建立了不同的group，并在这些group间创建了很多aggregated features，比如最高的price，平均price等&lt;/p&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Top #12 &lt;a href=&quot;https://www.kaggle.com/c/two-sigma-connect-rental-listing-inquiries/discussion/32118&quot;&gt;solution&lt;/a&gt; @b.e.s
&lt;p&gt; &amp;emsp;&amp;emsp;用到了基于高势集类别数据的group的一些统计量&lt;/p&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Top #13 &lt;a href=&quot;https://www.kaggle.com/c/two-sigma-connect-rental-listing-inquiries/discussion/32156&quot;&gt;solution&lt;/a&gt; @qianqian
&lt;p&gt; &amp;emsp;&amp;emsp;也是用了很多基于manager_id group的统计feature&lt;/p&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;&lt;h2 id=&quot;6&quot;&gt; 模型调参（Grid Search） &lt;/h2&gt;&lt;/h3&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;模型调参的话，能够在FE完之后为你提升0.001～0.002分数，因此如何为我们的分类器，比如xgboost选择好正确的参数是非常关键的。
 &lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;比较常用的是进行Grid Search，从你的输入组合中暴力地搜索cv结果最优的组合。我一般会设定一个learning rate，然后尝试不同的参数组合，取最优值，因为训search的代价比较高，最好选择一定范围，比如你事先cv的时候知道estimater会在700～1000的范围内，那就不要search这个范围以外的值了。&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;7&quot;&gt; 模型融合 &lt;/h2&gt;&lt;/h3&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;如果你没有idea了的话，就模型融合吧！模型融合是能够快速提高比赛成绩的捷径，现在的比赛几乎没有人不用到这个技巧，通常获胜者会对很多很多模型进行融合，并且会选择不同的模型融合的方式。这里有一篇非常好的模型融合解析
&lt;a href=&quot;https://mlwave.com/kaggle-ensembling-guide/&quot;&gt;博文&lt;/a&gt;
,相信每个看过它的人都会对模型融合有一个清楚的了解
&lt;p&gt;&amp;emsp;&amp;emsp;本次比赛中我使用了两种模型融合方式，一种是Averaging，一种是Stacking。&lt;/p&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;先来说说Stacking，因为这场比赛一名贡献比较大的选手分享了一个叫StackNet的库，作为新手我就直接用了。首先我用我的xgboost cv集交叉预测出结果作为feature的一部分放到train data中，再对test data进行预测的结果作为feature的一部分放到test data中，再在第二层上选择了Logistic Classifer，GradientBoostingClassifer，AdaBoostClassifer，NNSoftemaxClassfier，RandomForestClassifer等进行交叉预测，第三层选取了一个randomForest作为最后的结果训练和预测。Stacking主要增多了模型的diversity，使我的成绩上升了至少0.003的量级，&lt;/p&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;然后是Averaging，之前提到过Stacking需要交叉预测，我就选取了10组随机种子分别对训练集进行10-kfold交叉预测取平均，以及每个flod训练预测的时候我都对我的xgboost选取5个随机种子取平均。也就是说，在第一层Stacking的CV集交叉预测时我总共训练了500个模型进行平均。分数的提升大约在0.002左右。&lt;/p&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;直到比赛结束看了排名靠前的选手的模型融合后，才发现自己对于模型融合只是做了一点微小的工作，提升空间还非常大。详情可以看FE部分分享的solution链接。&lt;/p&gt;&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;8&quot;&gt; Tricks &lt;/h2&gt;&lt;/h3&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;在这场比赛中有一名在一开始的两个月一直遥遥领先的选手爆出这个比赛有个magic feature，大家陷入了疯狂找这个feature的过程中，直到那位分享了StackNet的选手分享出了这个magic feature：80G图片数据每个文件夹的创建时间，于是榜单大变，我一觉醒来后发现自己掉了很多就发现到了不对劲，便迅速加入到这个magic feature疯狂屠榜的大军中，从这里可以看见，一个信息量巨大的feature如果被发现的话，对比赛成绩会带来多么大的影响。&lt;/p&gt;

&lt;p&gt;&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;有一些group的feature能够起到非常重要的作用，详细见我比赛后发表的一个小样例
&lt;a href=&quot;https://www.kaggle.com/c/two-sigma-connect-rental-listing-inquiries/discussion/32098#177847&quot;&gt;discussion topic&lt;/a&gt;
。但是一定要防止过拟合。&lt;/p&gt;&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;9&quot;&gt; 总结 &lt;/h2&gt;&lt;/h3&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;这篇博文还有一些关键的点没有涉及到，比如数据的清洗，有些数据在记录中似乎是不同的，但是意思是一样的，就应该归位同一个类别，还有就是清除一些outlier等。
&lt;p&gt;&amp;emsp;&amp;emsp;对这个比赛的top solution总结得还是没到位，基本没有coding实现他们的idea过。由于课程压力比较大，等到时候空了的时候再好好整理。&lt;/p&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;另外还有就是需要持之以恒地打这个比赛，因为你以为你idea都没有了，模型调参、融合完毕了的时候，可能大家都找出了另一个&amp;quot;magic feature&amp;quot;，轻松地把你挤出奖牌的范围内了。。&lt;/p&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;最后，Kaggle is fun!&lt;/p&gt;
&lt;p&gt; 
&lt;p&gt;
&lt;p&gt;
&lt;p&gt;&lt;/p&gt;

&lt;p&gt;&lt;a rel=&quot;license&quot; href=&quot;http://creativecommons.org/licenses/by-nc-nd/3.0/cn/&quot;&gt;&lt;img alt=&quot;知识共享许可协议&quot; style=&quot;border-width:0&quot; src=&quot;https://i.creativecommons.org/l/by-nc-nd/3.0/cn/88x31.png&quot; /&gt;&lt;/a&gt;&lt;br /&gt;本博文采用&lt;a rel=&quot;license&quot; href=&quot;http://creativecommons.org/licenses/by-nc-nd/3.0/cn/&quot;&gt;知识共享署名-非商业性使用-禁止演绎 3.0 中国大陆许可协议&lt;/a&gt;进行许可&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/summary-of-get-a-silver-medal-in-kaggle/&quot;&gt;第一次参加Kaggle拿银总结&lt;/a&gt; was originally published by Haojie PAN at &lt;a href=&quot;&quot;&gt;My SCARLET&lt;/a&gt; on April 28, 2017.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Bayes Decision Rule]]></title>
 <link rel="alternate" type="text/html" href="/pr-bayes-decision-rule/" />
  <id>/pr-bayes-decision-rule</id>
  <published>2016-10-04T00:00:00+00:00</published>
  <updated>2016-10-04T00:00:00+00:00</updated>
  <author>
    <name>Haojie PAN</name>
    <uri></uri>
    <email>3140102237@zju.edu.cn</email>
  </author>
  <content type="html">
    &lt;blockquote&gt;
&lt;p&gt;情景引入： 作为一个classificaton的问题，假设有sea bass 和 salmon两类鱼，而我们决策的目的是为了区分它们，用于区分我们将引入feature这个概念，大致意思就是可以用一系列特征来判断出某一条打捞上来的鱼是sea bass还是salmon，在这里我们只取一条鱼的lightness作为feature。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3&gt;&amp;emsp;目录&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#1&quot;&gt;1. 相关术语&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#2&quot;&gt;2. 似然值和似然函数&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#3&quot;&gt;3. MLE 和 MAP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#4&quot;&gt;4. 贝叶斯公式&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#5&quot;&gt;5. The Decision rules and loss function&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#6&quot;&gt;6. The Risk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#7&quot;&gt;7. Bayes Decision Theory&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#8&quot;&gt;8. 实战题以及代码&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;1&quot;&gt; 1. 相关术语 &lt;/h2&gt;&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;state of nature:
&lt;p&gt;&amp;emsp;&amp;emsp;在这个例子的前提下，我们可以断定自然状态下只有两种可能：sea bass和salmon. 如果我们用符号\( w \)来表示state of nature, 则\( w = w_1 \)为sea bass, \( w = w_2 \)为salmon&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;priori probability(&lt;strong&gt;prior&lt;/strong&gt;):
&lt;p&gt;&amp;emsp;&amp;emsp;\( P(w_1) \)指打捞上来的下一条鱼为sea bass, \( P(w_2) \)指打捞上来的下一条鱼为salmon，很显然, \( P(w_1) + P(w_2) = 1 \). 从上述陈述中我们可以将prior理解为我们事先知道的知识，比如我们知道我们要打捞的海域这两种鱼的比例为2:1。&lt;/li&gt;
&lt;li&gt;class-conditional probability density(&lt;strong&gt;likelihood&lt;/strong&gt;):
&lt;p&gt;&amp;emsp;&amp;emsp;\( P(x \space | w_j) \), 用概率论的知识我们可以这么理解它：假设feature \( x \)在\( w_j \)这一类中服从某种分布，那么在这一类鱼的lightness为某一直的概率越大，相应的\( P(x \space | w_j) \)也就越大，比如说sea bass 的lightness 为10的可能性非常高，则\( P(x=10 \space | w_1) \)也就非常大。&lt;/li&gt;
&lt;li&gt;evidence：
&lt;p&gt;&amp;emsp;&amp;emsp;\( p(x) \)， 在这个例子中表示的就是某个lightness在打捞上来的鱼中出现的概率有多高。同事我们也可以将其当做一个scale因子，这可以保证posterior概率之和为1.&lt;/li&gt;
&lt;li&gt;posterior：
&lt;p&gt;&amp;emsp;&amp;emsp;\( P(w_j \space | x) \)， 在这个例子上即为当捞上一条鱼他的lightness为某一值时，它为sea bass和salmon的概率各自有多大
&lt;p&gt;&amp;emsp;&amp;emsp;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;&lt;h2 id=&quot;2&quot;&gt; 2. 似然值(likelihood)和似然函数(&lt;a href=&quot;https://en.wikipedia.org/wiki/Likelihood_function&quot;&gt;likelihood funciton&lt;/a&gt;) &lt;/h2&gt;&lt;/h3&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;我们假设likelihood:\( p(x \space | w_j) \)遵循某种涉及到参数\( \theta \)的分布（比如关于\( (\mu, \sigma^2) \)的正态分布, 则likelihood就相当于参数确定的给定分布下\( x \)发生的概率。
&lt;p&gt;&amp;emsp;&amp;emsp;从而似然函数即为对于\(\space data \space x \in X, state \space w \in W \)的一个条件概率分布\( p(x \space | w) \space \)
&lt;p&gt;&amp;emsp;&amp;emsp;&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;3&quot;&gt; 3.1 [附]Maximum likelihood Estimator(MLE) &lt;/h2&gt;&lt;/h3&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;在捞到的一堆鱼里面，统计得出对于sea bass鱼中\( lightness = x \) 出现的概率为 \( p_1 \), 对于salmon鱼中\( lightness = x \) 出现的概率为\( p_2 \)，假如\( p_1 \ge  p_2 \)，则我们可以粗浅的认为这条鱼是sea bass的可能性大一点，极端点想如果这个\( x \)在sea bass中出现频率最高，而在salmon中几乎不出现，肯定没有理由将其归为salmon了。用数学化的表示如下：
$$ w(x) = argmax_w(p(x \space | w))　$$
&lt;p&gt;&amp;emsp;&amp;emsp;特别的，对于二元问题我们经一系列不等式变换，再套个log函数可以列出下面的式子：
$$ log\frac{p(x \space | w_0)}{p(x \space | w_1)} &amp;gt; 0 则 w(x) = w_0, 否则w(x) = w_１ $$
&lt;p&gt;&amp;emsp;&amp;emsp;我们将不等式右边log里的比值称作 &lt;em&gt;likelihood ratio&lt;/em&gt;，这在下面的贝叶斯决策中也会涉及到。&lt;/p&gt;

&lt;p&gt;&lt;p&gt;&amp;emsp;&amp;emsp;&lt;/p&gt;

&lt;h3&gt;3.2. [附]The Maximum A Posteriori Estimator(MAP)&lt;/h3&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;与上面的ML类似, MAP不过就是把最大化的概率换成了posterior的, 如下公式：
$$ w(x) = argmax_w(p(w \space | x))　$$&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;4&quot;&gt; 4. 贝叶斯公式 &lt;/h2&gt;&lt;/h3&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;学过概率论的同学应该对下面这个式子并不陌生：&amp;emsp;\( P(w_j  | x) = \frac{p(x \space | w_j) P(w_j)}{p(x)} \)。&amp;emsp;
有了上面的术语解释，我们可以用相关的术语来表达这个式子:
&lt;center&gt; \[ posterior = \frac{likelihood \times prior}{evidence} \]&lt;/center&gt;
这就是所谓的贝叶斯公式了。
&lt;p&gt;&amp;emsp;&amp;emsp;我们知道，概率论中贝叶斯公式的推导是从下面这个等式中来的:
&lt;center&gt; \[ P(w_j  | x)p(x) = p(x \space | w_j) P(w_j) \] &lt;/center&gt;
我们可以左右求和一下
&lt;center&gt; \[ \sum P(w_j  | x)p(x) = \sum p(x \space | w_j) P(w_j) \] &lt;/center&gt;
而　\( \sum P(w_j  | x) = 1\)，所以有
&lt;center&gt; \[ p(x) = \sum p(x \space | w_j) P(w_j) \] &lt;/center&gt;
因此贝叶斯公式又可以写成：
&lt;center&gt; \[ P(w_j  | x) = \frac{p(x \space | w_j) P(w_j)}{\sum p(x \space | w_j) P(w_j)} \] &lt;/center&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;5&quot;&gt; 5. The Decision rules and loss function &lt;/h2&gt;&lt;/h3&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;假设我们捞上来一条鱼，通过上面陈述的一些方法，你将会判断它是sea bass还是salmon, 但是如果决策发生了错误怎么办？你会受到一定的损失(loss/cost), 这时候我们需要引进一个损失函数来判断这个决策到底会带来多大的损失，这就是loss function.
&lt;p&gt;&amp;emsp;&amp;emsp;在讲loss function前，我们先来引进一些符号，我们用\( \alpha(.) \)来表示一个　&lt;em&gt;decision rule&lt;/em&gt;。
&lt;p&gt;&amp;emsp;&amp;emsp;如果我们进行了一个决策\( \alpha(x) \), 得到的结果是\(w \)，我们定义loss function 为\( \lambda(\alpha(x),w)　\)。
&lt;p&gt;&amp;emsp;&amp;emsp;&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;6&quot;&gt; 6. The Risk &lt;/h2&gt;&lt;/h3&gt;

&lt;p&gt;&amp;emsp;&amp;emsp; 假设我们观察到了一个\( x \)，通过相应的决策我们得到了\( \alpha(x) = w_i \), 将这个决策记为\( \alpha_i \)。再假设我们要分的总类数为c，那么它的state of nature为\( w_j \)的可能性以posterior的方式表达就是: \( p(w_j \space | x) \)。
&lt;p&gt;&amp;emsp;&amp;emsp;有了上述的假设，我们就可以自然地定义采取决策\( \alpha_i \)所会造成的风险(Risk)为
$$ R(\alpha_i | x) = \sum_{j=1}^c \lambda(\alpha_i \space | w_j)P(w_j|x) $$&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;7&quot;&gt; 7. Bayes Decision Theory &lt;/h2&gt;&lt;/h3&gt;

&lt;p&gt;&amp;emsp;&amp;emsp; 通过以上所说的我们就可以定义贝叶斯决策理论了: 即寻找一个决策\( \hat(\alpha) \)来使得Risk　\( R(\alpha) \)最小。即:
$$ \hat\alpha = arg_{\alpha \in A}min(R(\alpha)), \alpha \in A $$
&lt;p&gt;&amp;emsp;&amp;emsp;　\( \hat\alpha  \)被称作贝叶斯决策(&lt;em&gt;Bayes Decision&lt;/em&gt;), \( R(\hat\alpha) \)被称作贝叶斯风险(&lt;em&gt;Bayes Risk&lt;/em&gt;)&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;8&quot;&gt; 8. 实战以及代码 &lt;/h2&gt;&lt;/h3&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;在这里我们要尝试解决&lt;a href=&quot;http://dengcai.zjulearning.org/Courses/DM/assignment/hw1/hw1.pdf&quot;&gt;assignment 1&lt;/a&gt;中关于Bayes Decision Rule 中的(b)题，　我的python代码及相关结果：&lt;a href=&quot;https://github.com/ScarletPan/Open-class-HW/tree/master/DM-dengcai/HM1/bayes_decision_rule&quot;&gt;链接&lt;/a&gt;&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/pr-bayes-decision-rule/&quot;&gt;Bayes Decision Rule&lt;/a&gt; was originally published by Haojie PAN at &lt;a href=&quot;&quot;&gt;My SCARLET&lt;/a&gt; on October 04, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[导言]]></title>
 <link rel="alternate" type="text/html" href="/pr-introduction/" />
  <id>/pr-introduction</id>
  <published>2016-10-03T00:00:00+00:00</published>
  <updated>2016-10-03T00:00:00+00:00</updated>
  <author>
    <name>Haojie PAN</name>
    <uri></uri>
    <email>3140102237@zju.edu.cn</email>
  </author>
  <content type="html">
    &lt;p&gt;&lt;p&gt;&amp;emsp;&amp;emsp; 到了大三了，&lt;a href=&quot;https://github.com/ScarletPan/VisualQA&quot;&gt;VQA&lt;/a&gt;项目暂时没有新的进展，因此告一段落。与&lt;a href=&quot;http://dengcai.zjulearning.org/&quot;&gt;professor Cai&lt;/a&gt; 交流后，听从他的建议将基础知识一步步地再搭建起来，对我以后将会有很大的帮助。回顾之前的学习生涯，在ML基础知识上花的其实挺少的，上过Andrew Ng在coursera上开的Machine learning课后似乎就直接开始学习NLP的相关知识了，再接着就是学习深度学习啊，学习RNN, LSTM之类的（虽然没有写博文），一开始professor Cai叫我看的 &lt;em&gt;Pattern Classification&lt;/em&gt;  一书开了个头就没有继续看下去了。突然之间感觉自己的基础还不怎么扎实就想着飞了，可能对于自己以后的学习会造成影响，因此打算从头开始学ML的算法，重新开始看 &lt;em&gt;Pattern Classification&lt;/em&gt; ，并且借助professor Cai的&lt;a href=&quot;http://dengcai.zjulearning.org/Courses/DM/&quot;&gt;课程网站&lt;/a&gt;继续学习。
&lt;p&gt;&amp;emsp;&amp;emsp;理想中是每学习一块内容就同步一篇博文归纳，希望自己能好好坚持下去。&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/pr-introduction/&quot;&gt;导言&lt;/a&gt; was originally published by Haojie PAN at &lt;a href=&quot;&quot;&gt;My SCARLET&lt;/a&gt; on October 03, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[极简的深度学习环境搭建(Nvidia GTX850 + cuda8.0 + tensorflow0.10.0 + ubuntu 16.04)]]></title>
 <link rel="alternate" type="text/html" href="/tensorflow/" />
  <id>/tensorflow</id>
  <published>2016-09-03T00:00:00+00:00</published>
  <updated>2016-09-03T00:00:00+00:00</updated>
  <author>
    <name>Haojie PAN</name>
    <uri></uri>
    <email>3140102237@zju.edu.cn</email>
  </author>
  <content type="html">
    &lt;h2&gt;1 &amp;emsp; Linux 版本&lt;/h2&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&quot;http://o6qr23o6z.bkt.clouddn.com/post_16-09-03-1.png&quot; alt=&quot;pic1&quot;&gt;&lt;/center&gt;&lt;/p&gt;

&lt;h2&gt;2 &amp;emsp; GPU 信息&lt;/h2&gt;

&lt;p&gt;&lt;center&gt;&lt;img src=&quot;http://o6qr23o6z.bkt.clouddn.com/post_16-09-03-2.png&quot; alt=&quot;pic2&quot;&gt;&lt;/center&gt;&lt;/p&gt;

&lt;h2&gt;3 &amp;emsp; 安装nvidia驱动&lt;/h2&gt;

&lt;p&gt;在software &amp;amp; update中直接更改即可, 由于cuda对驱动版本要求高, 因此最好选择361．安装完后重启一下
&lt;center&gt;&lt;img src=&quot;http://o6qr23o6z.bkt.clouddn.com/post_16-09-03-3.png&quot; alt=&quot;pic3&quot;&gt;&lt;/center&gt;&lt;/p&gt;

&lt;h2&gt;4 &amp;emsp; 安装cuda 8.0&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;前往 &lt;a href=&quot;https://developer.nvidia.com/cuda-release-candidate-download&quot;&gt;cuda下载页面&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;注册（如果还没有账号）&lt;/li&gt;
&lt;li&gt;选择deb下载
&lt;center&gt;&lt;img src=&quot;http://o6qr23o6z.bkt.clouddn.com/post_16-09-03-4.png&quot; alt=&quot;pic4&quot;&gt;&lt;/center&gt;&lt;/li&gt;
&lt;li&gt;下载成功后在本地解包安装&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-linux&quot; data-lang=&quot;linux&quot;&gt;$ sudo dpkg -i cuda-repo-ubuntu1604-8-0-rc_8.0.27-1_amd64.deb
$ sudo apt-get update
$ sudo apt-get install cuda
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;设置环境变量
&lt;p&gt;在.bashrc中输入下列语句：&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;export LD_LIBRARY_PATH=&quot;$LD_LIBRARY_PATH:/usr/local/cuda/lib64:/usr/local/cuda/extras/CUPTI/lib64&quot;
export CUDA_HOME=/usr/local/cuda
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;测试(以1_Utilities/deviceQuery为例)：&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ cd /usr/local/cuda/samples/1_Utilities/deviceQuery
$ make
$ ./deviceQuery
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&amp;emsp;成功后大概长这样：
&lt;center&gt;&lt;img src=&quot;http://o6qr23o6z.bkt.clouddn.com/post_16-09-03-5.png&quot; alt=&quot;pic5&quot;&gt;&lt;/center&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;UPDATE&lt;/strong&gt; &lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;装了cuda 8运行pip下载的tensorflow会出现问题。如果读者出现问题，可以考虑安装7.5&lt;/li&gt;
&lt;li&gt;cuda7.5并没有支持ubuntu16.04。但可以参考这个&lt;a href=&quot;https://www.pugetsystems.com/labs/hpc/NVIDIA-CUDA-with-Ubuntu-16-04-beta-on-a-laptop-if-you-just-cannot-wait-775/&quot;&gt;博文&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;5 &amp;emsp; 部署cudnn4.0&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;前往　&lt;a href=&quot;https://developer.nvidia.com/cudnn&quot;&gt;cudnn下载页面&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;下载相应版本的cudnn4&lt;/li&gt;
&lt;li&gt;将相应内容拷贝到cuda目录中&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;tar xvzf cudnn-7.5-linux-x64-v4.tgz
sudo cp cuda/include/cudnn.h /usr/local/cuda/include
sudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64
sudo chmod a+r /usr/local/cuda/include/cudnn.h /usr/local/cuda/lib64/libcudnn*
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;6 &amp;emsp; 安装相应的tensorflow&lt;/h2&gt;

&lt;p&gt;前往 &lt;a href=&quot;https://www.tensorflow.org/versions/r0.10/get_started/os_setup.html&quot;&gt;tensorflow官网&lt;/a&gt;，其中列举了不少安装方式，安装带gpu的版本&lt;/p&gt;

&lt;h2&gt;7 &amp;emsp; 测试&lt;/h2&gt;

&lt;p&gt;可以用tensorflow自带的sample测试,可以看到gpu相对与cpu测试速度有很大的提升：
&lt;p&gt; cpu版本 &lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;http://o6qr23o6z.bkt.clouddn.com/post_16-09-03-6.png&quot; alt=&quot;pic6&quot;&gt;&lt;/center&gt;
&lt;p&gt; gpu版本 &lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;http://o6qr23o6z.bkt.clouddn.com/post_16-09-03-7.png&quot; alt=&quot;pic7&quot;&gt;&lt;/center&gt;&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/tensorflow/&quot;&gt;极简的深度学习环境搭建(Nvidia GTX850 + cuda8.0 + tensorflow0.10.0 + ubuntu 16.04)&lt;/a&gt; was originally published by Haojie PAN at &lt;a href=&quot;&quot;&gt;My SCARLET&lt;/a&gt; on September 03, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Steps for starting a django app]]></title>
 <link rel="alternate" type="text/html" href="/django/" />
  <id>/django</id>
  <published>2016-08-24T00:00:00+00:00</published>
  <updated>2016-08-24T00:00:00+00:00</updated>
  <author>
    <name>Haojie PAN</name>
    <uri></uri>
    <email>3140102237@zju.edu.cn</email>
  </author>
  <content type="html">
    &lt;h3&gt;Tips1: &amp;emsp; 配置 pymysql　*&lt;/h3&gt;

&lt;p&gt;在　&lt;strong&gt;init&lt;/strong&gt;.py 中添加：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;pymysql&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;pymysql&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;install_as_MySQLdb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;在　setting.py中修改：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;DATABASES&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&#39;default&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&#39;ENGINE&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&#39;django.db.backends.mysql&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&#39;NAME&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&#39;vqa&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;# mysql数据库名&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&#39;USER&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;root&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;c&quot;&gt;#　mysql用户名，留空则默认为当前linux用户名　&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&#39;PASSWORD&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;123456&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&#39;HOST&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;     &lt;span class=&quot;c&quot;&gt;# 留空默认为localhost&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&#39;PORT&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;     &lt;span class=&quot;c&quot;&gt;# 留空默认为3306端口&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Tips2: &amp;emsp; 创建数据库并且migrate&lt;/h3&gt;

&lt;p&gt;在 mysql  中创建数据库
在项目目录中输入&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ python manage.py migrate
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;成功后会看到：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;Operations to perform:
  Apply all migrations: auth, sessions, admin, contenttypes
Running migrations:
  Rendering model states... DONE
  Applying contenttypes.0001_initial... OK
  Applying auth.0001_initial... OK
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying contenttypes.0002_remove_content_type_name... OK
  Applying auth.0002_alter_permission_name_max_length... OK
  Applying auth.0003_alter_user_email_max_length... OK
  Applying auth.0004_alter_user_username_opts... OK
  Applying auth.0005_alter_user_last_login_null... OK
  Applying auth.0006_require_contenttypes_0002... OK
  Applying auth.0007_alter_validators_add_error_messages... OK
  Applying sessions.0001_initial... OK

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Tips3: &amp;emsp; 创建app&lt;/h3&gt;

&lt;p&gt;在项目目录中输入&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ python manage.py startapp polls
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Tips4: &amp;emsp; 创建模型&lt;/h3&gt;

&lt;p&gt;编辑　app/models.py&lt;/p&gt;

&lt;h3&gt;Tips5: &amp;emsp; 激活模型&lt;/h3&gt;

&lt;p&gt;编辑　project/settings/py&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;INSTALLED_APPS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&#39;django.contrib.admin&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&#39;django.contrib.auth&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&#39;django.contrib.contenttypes&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&#39;django.contrib.sessions&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&#39;django.contrib.messages&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&#39;django.contrib.staticfiles&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&#39;app&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;    &lt;span class=&quot;c&quot;&gt;# 这是新增的app&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;运行命令&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ python manage.py makemigrations app    # app迁移
$ python manage.py sqlmigrate vqa 0001　 # sql迁移
$ python manage.py migrate # 将这些改变更新到数据库中。
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Tips5(+): &amp;emsp; 修改模型&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ 修改models.py （最好每个类中都写上 def __str__())
$ python manage.py makemigrations
$ python manage.py migrate
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Tips6: &amp;emsp; 创建管理网站&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ python manage.py createsuperuser # 创建一个能够登录管理站点的用户
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;在admin.py中注册，添加&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.contrib&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;admin&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;.models&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;xxx&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;admin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;site&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;register&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xxx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Tips7: &amp;emsp; 制作对外view&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;html 模板
在app中创建 app/templates/app/xxx.html&lt;/li&gt;
&lt;li&gt;css,js, images 模板,&lt;/li&gt;
&lt;li&gt;在app中创建 app/static/css/xxx.css&lt;/li&gt;
&lt;li&gt;在project/setting.py 找到 STATIC_URL 并在下方添加&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;STATIC_ROOT = os.path.join(os.path.dirname(__file__),&#39;static&#39;)
STATICFILES_DIRS = (
    (&#39;css&#39;,os.path.join(STATIC_ROOT,&#39;css&#39;).replace(&#39;\\&#39;,&#39;/&#39;) ), 
    (&#39;js&#39;,os.path.join(STATIC_ROOT,&#39;js&#39;).replace(&#39;\\&#39;,&#39;/&#39;) ),
    (&#39;images&#39;,os.path.join(STATIC_ROOT,&#39;images&#39;).replace(&#39;\\&#39;,&#39;/&#39;) ),
)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;并创建相应的文件。
3. 相应的html中的link改为：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;    &lt;span class=&quot;nt&quot;&gt;&amp;lt;link&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/css&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;rel=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;stylesheet&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/static/css/xxx.css&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Tips8: &amp;emsp; 部署项目&lt;/h3&gt;

&lt;p&gt;详见：http://djangobook.py3k.cn/2.0/chapter12/&lt;/p&gt;

&lt;h3&gt;*ImageField 的使用&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;在setting.py中添加路径和url:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;MEDIA_ROOT = BASE_DIR + &#39;xxx/media/&#39;
MEDIA_URL =  BASE_URL + &#39;xxx/media/&#39;   # 两者其实相同
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;在project/urls.py添加 url:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.conf.urls.static&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;static&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;django.conf&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;settings&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;***&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;urlpatterns&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;static&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;settings&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MEDIA_URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;document_root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;settings&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MEDIA_ROOT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;在app/model.py中对于相应的model:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;xxx = models.ImageField(upload_to = &#39;***&#39;) # ***为相对路径
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;*配置ajax&lt;/h3&gt;

&lt;p&gt;在js脚本前添加配置：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getCookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cookieValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cookie&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cookie&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cookies&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cookies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cookie&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;jQuery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cookies&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// Does this cookie string begin with the name we want?&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;substring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;=&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;cookieValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;decodeURIComponent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;cookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;substring&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;cookieValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;csrftoken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getCookie&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;csrftoken&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;csrfSafeMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// these HTTP methods do not require CSRF protection&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/^&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;GET|HEAD|OPTIONS|TRACE&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;$/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;sameOrigin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// test that a given url is a same-origin URL&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// url could be relative or scheme relative or absolute&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;host&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// host + port&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;protocol&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;sr_origin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;//&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;origin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;protocol&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;sr_origin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// Allow absolute or scheme relative URLs to same origin&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;origin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;origin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;origin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;sr_origin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;sr_origin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;sr_origin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// or any other URL that isn&#39;t scheme relative or absolute i.e relative.&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/^&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;(\/\/&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;|http:|https:&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;.*/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ajaxSetup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;beforeSend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;xhr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;settings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;csrfSafeMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;settings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;sameOrigin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;settings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// Send the token to same-origin, relative URLs only.&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// Send the token only if the method warrants CSRF protection&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// Using the CSRFToken value acquired earlier&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;xhr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;setRequestHeader&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;X-CSRFToken&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;csrftoken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
    &lt;p&gt;&lt;a href=&quot;/django/&quot;&gt;Steps for starting a django app&lt;/a&gt; was originally published by Haojie PAN at &lt;a href=&quot;&quot;&gt;My SCARLET&lt;/a&gt; on August 24, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Software config in linux]]></title>
 <link rel="alternate" type="text/html" href="/linux_software/" />
  <id>/linux_software</id>
  <published>2016-07-18T00:00:00+00:00</published>
  <updated>2016-07-18T00:00:00+00:00</updated>
  <author>
    <name>Haojie PAN</name>
    <uri></uri>
    <email>3140102237@zju.edu.cn</email>
  </author>
  <content type="html">
    &lt;h1&gt;目录&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#1&quot;&gt;搜狗拼音&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#2&quot;&gt;SS-link&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#4&quot;&gt;Git&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#5&quot;&gt;Ruby&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#6&quot;&gt;Nodejs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#7&quot;&gt;Jekyll&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#8&quot;&gt;Mysql&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#9&quot;&gt;Apache&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#10&quot;&gt;Latex&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#11&quot;&gt;Flash Player&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#12&quot;&gt;Sublime texter&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;&lt;h2 id=&quot;1&quot;&gt; [1] &amp;emsp;Sougoupinyin&lt;/h2&gt;&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;download from website&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$ sudo dpkg -i sogoupinyin_2.0.0.0078_amd64.deb&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$ sudo apt-get install -f&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$ sudo dpkg -i sogoupinyin_2.0.0.0078_amd64.deb&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3&gt;&lt;h2 id=&quot;2&quot;&gt; [2] &amp;emsp; Shadowsocks Qt-5 + SwitchyOmega&lt;/h2&gt;&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;下载&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ sudo add-apt-repository ppa:hzwhuang/ss-qt5
$ sudo apt-get update
$ sudo apt-get install shadowsocks-qt5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;setting-&amp;gt;network-&amp;gt;proxy-&amp;gt;socks host + port.&lt;/li&gt;
&lt;li&gt;add SwitchyOmega into chromium&lt;/li&gt;
&lt;/ol&gt;

&lt;h3&gt;&lt;h2 id=&quot;3&quot;&gt; [3] &amp;emsp; Atom text edit &lt;/h2&gt;&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ sudo add-apt-repository ppa:webupd8team/atom
$ sudo apt-get update
$ sudo apt-get install atom
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;h2 id=&quot;4&quot;&gt; [4] &amp;emsp; git &lt;/h2&gt;&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;下载：&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ sudo apt-get git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;配置：&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ git config --global user.name &quot;ScarletPan&quot;
$ git config --global user.email &quot;myscarlet@sina.com&quot;
$ ssh-keygen -t rsa -C &quot;myscarlet@sina.com&quot; #生成 ssh-key
$ eval &quot;$(ssh-agent -s)&quot; # 检查ssh-agent
$ ssh-add ~/.ssh/id_rsa # 将新产生的秘钥加入
$ gedit .ssh/id_rsa.pub # 将内容复制到github用户SSH-key中
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;h2 id=&quot;5&quot;&gt; [5] &amp;emsp; ruby&lt;/h2&gt;&lt;/h3&gt;

&lt;ol&gt;
&lt;li&gt;下载：&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ sudo apt-get install ruby2.3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ol&gt;
&lt;li&gt;配置&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ gem source -r https://rubygems.org/  #更换到内陆的下载源
$ gem source -a https://ruby.taobao.org
$ sudo apt-get install ruby-dev
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;h2 id=&quot;6&quot;&gt; [6] &amp;emsp; Nodejs &lt;/h2&gt;&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ sudo apt-get install nodejs # nodejs -v4.2.6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;h2 id=&quot;7&quot;&gt; [7] &amp;emsp; jekyll &lt;/h2&gt;&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ sudo gem install jekyll
$ sudo gem install jekyll-sitemap
$ sudo gem install jekyll-paginate
$ sudo gem install jekyll-gist
$ sudo gem install redcarpet
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;h2 id=&quot;8&quot;&gt; [8] &amp;emsp; mysql &lt;/h2&gt;&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ sudo apt-get install mysql-server
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ mysql_secure_installation
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&amp;emsp; The first question will ask if you want to change the root password, but because you just set it, enter n. For all other questions, press ENTER to accept the default response.&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;9&quot;&gt; [9] &amp;emsp; apache &lt;/h2&gt;&lt;/h3&gt;

&lt;p&gt;参考：&lt;a href=&quot;https://www.digitalocean.com/community/tutorials/how-to-set-up-an-apache-mysql-and-python-lamp-server-without-frameworks-on-ubuntu-14-04&quot;&gt;python + apache + django 配置  &lt;/a&gt;&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;10&quot;&gt; [10] &amp;emsp; latex &lt;/h2&gt;&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ sudo apt-get install texlive-full
$ sudo atp-get install texmaker
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;h2 id=&quot;11&quot;&gt; [11] &amp;emsp; Flash-Player &lt;/h2&gt;&lt;/h3&gt;

&lt;p&gt;System-settings -&amp;gt; Software &amp;amp; Update -&amp;gt; other Software -&amp;gt; Canonical Partners (get-in)
&lt;code&gt;
sudo apt install adobe-flashplugin
&lt;/code&gt;&lt;/p&gt;

&lt;h3&gt;&lt;h2 id=&quot;12&quot;&gt; [11] &amp;emsp; sublime-text &lt;/h2&gt;&lt;/h3&gt;

    &lt;p&gt;&lt;a href=&quot;/linux_software/&quot;&gt;Software config in linux&lt;/a&gt; was originally published by Haojie PAN at &lt;a href=&quot;&quot;&gt;My SCARLET&lt;/a&gt; on July 18, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[语音识别综述]]></title>
 <link rel="alternate" type="text/html" href="/ASR/" />
  <id>/ASR</id>
  <published>2016-05-19T00:00:00+00:00</published>
  <updated>2016-05-19T00:00:00+00:00</updated>
  <author>
    <name>Haojie PAN</name>
    <uri></uri>
    <email>3140102237@zju.edu.cn</email>
  </author>
  <content type="html">
    &lt;p&gt;最近有门课程让我们短时间去了解一个领域，并且做一个文献综述，我看了看几个给题， 还是ASR最好写了，像机器学习、图像处理这些都太宽太泛了。&lt;/p&gt;

&lt;p&gt;于是记录如下：&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;摘要：&lt;/strong&gt;   语音识别是一个令人兴奋的研究领域，并在60年以来吸引了不少研究者。本文将会给出语音识别的定义、基础模型，并对语音识别发展脉络、发展方向做出一些简短的阐述。另外是介绍一些当今研究领域中对于语音识别系统的方法，特别是占据主流语音识别系统的隐马尔科夫模型（HMM）以及近年来越来越受到追捧的深度神经网络（DNN）方法。但随着语音识别技术日渐成熟，仍有一些挑战和困难，比如通用的复杂的环境因素、多变的语音变量、语音系统评估等。&lt;br&gt;
&lt;strong&gt;关键字：&lt;/strong&gt;  研究脉络；HMM；深度学习；展望&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;1   介绍和研究意义&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;ensp;  语音是人们日常交流活动的最基本、也是最有效的一种方式 [1]，从而面向计算机人们也非常希望能够通过直接对话的方式进行交流和传递信息。因此语音识别系统的构建显得十分关键。&lt;br&gt;
&amp;emsp;&amp;ensp;  什么是语音识别? 它的全称是自动语音识别（Automatic Speech Recognition）：它是一个能够通过一系列计算机程序构建的算法将语音信号转换成文字序列的过程
[2]。也就是说通关过ASR计算机能够“听”懂人所讲述的话，并且再进一步改进后能够与人类进行交流。&lt;br&gt;
&amp;emsp;&amp;ensp;  很显然，ASR的研究是很让人激动的，如果能实现通用的ASR系统应用于不同的环境，这将便捷信息检索、语言翻译、语言教育等，极大地改善人类的生活。  &lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2   背景及研究脉络&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;ensp;  语音识别技术在过去的60年里吸引了大量研究者的注意，最早可以追溯到20世纪二、三十年代，如早期（1939年）贝尔实验室在纽约世博会上展示了他们的语音综合机器。&lt;br&gt;
&amp;emsp;&amp;ensp;  而语音识别的重大发展是在20世纪70年代中叶，那个时代见证了在孤立字识别领域上许多里程碑式的进步。首先俄国的研究者们展示了在语音识别中运用模式识别（Pattern Recognition）的想法，日本的研究者成功运用到了动态编程编码（Dynamic Programming code），如板仓提出的线性预测编码成为低位速下编码（LPC）方法高质量语音最有用的方法之一。另一个值得注意的是卡内基梅隆大学在1973向世人展示了Heresay I语音理解系统，能够在1011个单词的词汇表中以较好的准确性识别语音。&lt;br&gt;
&amp;emsp;&amp;ensp;  而80年代起在连接词识别上获得了比较好的成效，特别是隐马尔可夫模型（Hidden Markov Model，下面简称HMM）[11] 的发展并被大范围的接受，其作为模式匹配策略被当时的很多公司采用和商业化，就算到40多年后的今天也是占据主导的声学模型算法之一。另外就是神经网络的发展，但是在当时由于一些实践上的原因，并没有像HMM那样成功。&lt;br&gt;
&amp;emsp;&amp;ensp;  语音识别的最具转折性和建设性的发展归因于统计方法的引入，包括HMM、期望最大化（EM），最大互信息（MMI）等。另外是信号表述技术的发展，如梅尔频率倒谱系数（MFCC）[12]，感知线性预测常数（PLP）等。&lt;br&gt;
&amp;emsp;&amp;ensp;  基于摩尔法则的硬件技术进步使得ASR研究者能在很短时间内跑一些复杂的算法，另外还有一些大的语音语料库的构建使得语音识别的模型、算法在后来的几十年里不断地改进和延伸。&lt;br&gt;
&amp;emsp;&amp;ensp;  时至今日，由于硬件的支持、GPU的发展使得深度学习不断发展，许多研究者从传统的高斯混合模型（GMM）和HMM结合转向深度神经网络（DNN）与HMM结合，并取得了不小的成效 [3]。深度学习以及深度神经网络在语音处理方向上的应用仍是当今研究的热潮之一。&lt;br&gt;
&amp;emsp;&amp;ensp;  除了在模型上的不断发展以外，另外有两点值得可喜的发展：一是语料库的不断完善和数据集的不断增多（如TIMIT、TI46数据集等），二是面向大量音频数据处理的工具的出现和不断完善（如CMU的Sphinx，剑桥大学的HTK等）[4]。  &lt;/p&gt;

&lt;p&gt;&lt;strong&gt;3   目前的语音识别技术&lt;/strong&gt;  &lt;/p&gt;

&lt;p&gt;&lt;strong&gt;3.1 基础语音识别模型&lt;/strong&gt;
&lt;center&gt; &lt;img src=&quot;http://o6qr23o6z.bkt.clouddn.com/asr_basemodel.png&quot; alt=&quot;图1&quot;&gt; &lt;/center&gt;&lt;br&gt;
&amp;emsp;&amp;ensp;  一个标准的语音识别模型首先假定有一串输入序列O = {O1, O2, .., On},,以及符号词典 W = {W1, W2, .., W_n}, 求解对于该输入序列解码出符号串（输出语句）W = {W1, W2, .., Wk}。通过数学转化成求解以下概率的最大值：&lt;br&gt;
&lt;center&gt; W = argmaxP(O|W)P(W) &lt;/center&gt;&lt;br&gt;
$emsp;&amp;ensp;  其中P(O|W)被称之为声学模型，P(W)被称为语言模型。&lt;br&gt;
&amp;emsp;&amp;ensp;  该模型的求解过程如图1所示，其中的搜索，就是依据对公式中的声学模型打分和语言模型打分，寻找一个词模型序列以描述输入语音信号，从而得到词解码序列。&lt;br&gt;
&lt;strong&gt;3.2 当今的语音识别方法&lt;/strong&gt;
&lt;strong&gt;3.2.1 特征抽取&lt;/strong&gt;&lt;br&gt;
&amp;emsp;&amp;ensp;  在语音识别中，特征抽取的主要目的是在给定一个紧凑的输入信号表示计算出特征向量的简约序列。主要分成三个步骤：语音分析（语音前端声学处理）；编译成包含动静态的扩展特征向量；将这些扩展后的特征向量转化成影响因子更大的向量，然后提供给识别器。&lt;br&gt;
&amp;emsp;&amp;ensp;  现在主要有下面的一些模型：1.主元成分分析（PCA）；2.线性判别式分析（LDA）；3.独立成分分析（ICA）；4.线性预测编码； 5. 倒谱分析；6.梅尔频率倒谱系数（MFFC）7. 滤波器分析；8.基于核函数的特征抽取等 [2]。&lt;br&gt;
&lt;strong&gt;3.2.2 语音识别方式&lt;/strong&gt;&lt;br&gt;
&amp;emsp;&amp;ensp;  声学语音学方法：主要步骤为语音谱段分析、特征提取；分割并标注语段：声音信号被分割成几个稳定的语音区，并进行匹配标注；从语音标注序列中判断一个词或者一串词是否有效。&lt;br&gt;
&amp;emsp;&amp;ensp;  模式识别方式:包括1.基于模板的模式识别；2.随机模型法(最有名的就是上文提到的(HMM))；3.动态时间规整（DTW）；4.矢量量化（VQ）&lt;br&gt;
&amp;emsp;&amp;ensp;  人工智能方式:基于知识的专家系统。&lt;br&gt;
&amp;emsp;&amp;ensp;  神经网络方式：多隐藏层的深度神经网络(DNN)，比如微软研究院的研究[4];深度循环网络（RNN）训练，比如多伦多大学的研究 [5]。&lt;br&gt;
&lt;strong&gt;3.2.3 现今语音识别系统&lt;/strong&gt;&lt;br&gt;
&amp;emsp;&amp;ensp;  现今的语音识别系统主要使用下列两个方式。&lt;br&gt;
&amp;emsp;&amp;ensp;  一是使用HMM解决语音的时间变率，然后用高斯混合模型(GMMs)决定每个HMM状态对声学输入的拟合好坏。&lt;br&gt;
&amp;emsp;&amp;ensp;  另一个是用前向传播神经网络去评估拟合好坏，即用系数的一些帧作为输入，以HMM状态的后端概率作为输出。这种深度神经网络的方式已经越来越体现出它的优势性。&lt;br&gt;
&lt;strong&gt;3.3 存在的问题及原因&lt;/strong&gt;&lt;br&gt;
&amp;emsp;&amp;ensp;  一是处理环境噪声和缺失信息的处理， M. Cooke等人在 [6]中讨论了这个问题，未来的语音识别系统还是要更优化地解决它。&lt;br&gt;
&amp;emsp;&amp;ensp;  二是各种变量对于语音处理的挑战。M.Bengzeghiba等人在 [7]中描述了一系列变量比如说话风格，演说人的生理因素，年龄，情绪等。
&amp;emsp;&amp;ensp;  三是对于语音系统可行度的评估分析， H. Jiang 在 [8]中提到了一些置信度分析方法，但仍存在不少问题。&lt;br&gt;
&amp;emsp;&amp;ensp;  四是对于数据中一些不能被词典所包括的超纲词汇以及生僻字对于语音识别的影响研究&lt;br&gt;
&amp;emsp;&amp;ensp;  1994年摩尔展示了20个语音识别机制的主题[10]，在现在仍是语音发展的关键。  &lt;/p&gt;

&lt;p&gt;&lt;strong&gt;4   进一步发展与研究概述&lt;/strong&gt;&lt;br&gt;
&amp;emsp;&amp;ensp;  在以后的研究和发展过程中大致有以下一些需要投入研究[9]：&lt;br&gt;
&amp;emsp;&amp;ensp;  一是对于置信度的研究分析的改进，需要一个更加通用的评估手段。&lt;br&gt;
&amp;emsp;&amp;ensp;  二是日常音频的不断堆积，需要有更加强大的ASR系统在大范围的语音、发音人、频道和娱乐因素环境下去处理声学环境的多变性、混响、外部噪音、交流频道等。&lt;br&gt;
&amp;emsp;&amp;ensp;  三是自我适应（学习）的语言技术研究。&lt;br&gt;
&amp;emsp;&amp;ensp;  四是对于数据中一些不能被词典所包括的超纲词汇以及生僻字对于语音识别的影响研究&lt;br&gt;
&amp;emsp;&amp;ensp;  1994年摩尔展示了20个语音识别机制的主题[10]，在现在仍是语音发展的关键。  &lt;/p&gt;

&lt;p&gt;&lt;strong&gt;5   见解与感想&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;ensp;  对于语音识别技术的研究是令人兴奋的，尤其是统计学习的引进使得这个领域发展迅速。在研究该领域的时候，需要重点对主流算法，比如隐马尔可夫(HMM)的研究，文献[11] 提供了一个系统的HMM的详细描述。 针对于主流算法的不足进行发散思考。&lt;br&gt;
&amp;emsp;&amp;ensp;  另外是由于现在的深度学习研究热潮中，对于深度神经网络在语音识别中的研究也是非常关键。&lt;br&gt;
&amp;emsp;&amp;ensp;  最后是如果能够提供更为强大的语音识别评估系统对这个领域的研究将提供非常大的帮助。  &lt;/p&gt;

&lt;p&gt;&lt;strong&gt;6  参考文献&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;[1]   Harpreet Singh, Ashok Kumar Bathla, “A Survey on Speech Recognition” &lt;em&gt;in ISSN Volume No. 2, Issue No. 6, June 2013&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;[2] M.A.Anusuya, S.K.Katti, “Speech Recognition by Machine: A Review” &lt;em&gt;in IJCSIS Vol. 6, No. 3, 2009&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;[3] Geoffrey Hinton, Li Deng, Dong Yu, George E. Dahl, Abdel-rahman Mohamed, Navdeep Jaitly, Andrew Senior, Vincent Vanhoucke, Patrick Nguyen, Tara N. Sainath, and Brian Kingsbury, “Deep Neural Networks for Acoustic Modeling in Speech Recognition”* in IEEE SIGNAL PROCESSING MAGAZINE November 2012*&lt;/p&gt;

&lt;p&gt;[4] Li Deng, Jinyu Li, Jui-Ting Huang, Kaisheng Yao, Dong Yu, Frank Seide, Michael L. Seltzer, Geoff Zweig, Xiaodong He, Jason Williams, Yifan Gong, and Alex Acero, “Recent Advances in Deep Learning for Speech Research at Microsoft” &lt;em&gt;in IEEE International Conference on Acoustics, Speech and Signal Processing May 2013&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;[5]  Alex Graves, Abdel-rahman Mohamed and Geoffrey Hinton,  “Speech Recognition with Deep Recurrent Neural Networks” &lt;em&gt;in IEEE International Conference on Acoustics, Speech and Signal Processing May 2013&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;[6] Martin Cooke, Phil Green, Ljubomir Josifovski, Ascension Vizinho, “Robust automatic speech recognition with missing and unreliable acoustic data”* in SPEECH COMMUNICATION May 2000*&lt;/p&gt;

&lt;p&gt;[7]  M. Benzeghiba, R. De Mori, O. Deroo, S. Dupont &lt;em&gt;, T. Erbes, D. Jouvet, L. Fissore, P. Laface, A. Mertins, C. Ris, R. Rose, V. Tyagi, C. Wellekens, “Automatic speech recognition and speech variability: A review” *in SPEECH COMMUNICATION Volume 49, Issues 10–11, October–November 2007&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;[8] Hui Jiang, “Confidence measures for speech recognition: A survey” &lt;em&gt;in SPEECH COMMUNICATION December 2004&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;[9] Janet M. Baker, Li Deng, James Glass, Sanjeev Khudanpur, Chin-Hui Lee, Nelson Morgan, and Douglas O’Shaughnessy, “Research Developments and Directions in Speech Recognition and Understanding, Part 1” &lt;em&gt;in IEEE SIGNAL PROCESSING MAGAZINE  May 2009&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;[10] Yang Liu et.al, “Enriching Speech Recognition with Automatic Detection of sentence Boundaries an disfluencies” &lt;em&gt;in IEEE Transactions on Audio, Speech and Language processing, V.14, No.4, July 2006&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;[11] L.R.Rabiner, “A Tutorial on Hidden Markov Models and Selected Application in Speech Recognition” &lt;em&gt;in Proc.IEEE February 1989&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;[12] S. Davis and P. Mermelstein, “Comparison of parametric representations for monosyllabic word recognition in continuously spoken sentences” &lt;em&gt;in IEEE Trans. Acoust. Speech Signal Processing, vol. 28, no. 4, pp. 357–366, August 1980&lt;/em&gt;&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/ASR/&quot;&gt;语音识别综述&lt;/a&gt; was originally published by Haojie PAN at &lt;a href=&quot;&quot;&gt;My SCARLET&lt;/a&gt; on May 19, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Qt 静态编译]]></title>
 <link rel="alternate" type="text/html" href="/static/" />
  <id>/static</id>
  <published>2016-04-23T00:00:00+00:00</published>
  <updated>2016-04-23T00:00:00+00:00</updated>
  <author>
    <name>Haojie PAN</name>
    <uri></uri>
    <email>3140102237@zju.edu.cn</email>
  </author>
  <content type="html">
    &lt;h1&gt;编译步骤&lt;/h1&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;对于第一次接触静态编译的人来说，静态编译GUI工程的确是一项非常艰巨的任务，不过万幸，最终还是把我的&lt;a href=&quot;https://github.com/ScarletPan/Mips-assembler&quot;&gt;汇编器&lt;/a&gt;静态编译成功啦。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;工具：QT creator 5.6.0 community 版本。&lt;/li&gt;
&lt;li&gt;一些重要的依赖库：Qt5Core、Qt5Widgets等其他Qt库，以及C++的等标准库，Runtime库。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;首先来讲一下静态编译的难点：由于Qt 5.6 涉及到版权问题，因此它并不给社区版的用户提供静态编译的条件，所有的 ** &lt;em&gt;/include&lt;/em&gt;*  和 ** &lt;em&gt;/lib&lt;/em&gt;* 里面的库文件都是通过动态链接dll使用户在本地项目编译并顺利运行，但如果想使自己的应用程序在其他没有相应依赖库环境条件下的电脑上跑（这里只涉及windows），一个方法是找到所有的相关文件（即.dll）打包到发布的.exe文件路径中，但是总是会有疏漏（或者说不能正常运行）， 而且每个.dll的文件都非常巨大,达到10M以上的级别，所以不是非常好，所以另一方法是静态编译，但是静态编译要求有预编译好的静态库，这些只是但从下载下来的Qt软件中是找不到的，下面说说我是怎么实现静态编译的。&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;由于在搜集方法的过程中很多人都只讲了如何静态编译Qt，而给出更明确的目标（如何静态发布自己的.exe）为了不让以后的自己或者看到这篇人多走弯路特地记录了以高效的方式静态编译的方法：&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;步骤一：安装minGW&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;总之我觉得懂编译的人对它应该都不陌生，对于不懂编译的孩子（比如我），只要知道它可以编译你的Qt程序，允许你在没有第三方动态链接库的情况下使用 GCC 产生 Windows32 程序。具体下载地址在&lt;a href=&quot;https://sourceforge.net/projects/mingw/files/&quot;&gt;这里&lt;/a&gt;,注意的是如果嫌麻烦，就别戳进那些文件夹里去了，直接点 &lt;a href=&quot;https://sourceforge.net/projects/mingw/files/latest/download?source=files&quot;&gt;Download mingw-get-setup.exe (86.5 kB)&lt;/a&gt;,exe安装帮你免去了配置各种环境的麻烦：) 安装时候据说最好选择最新版本，不过我自己的话选择的是4.9.2的&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;步骤二：取得Qt静态编译后的版本&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;法一：最简单也是最高效的方法，直接去Qt社区找，如果运气好的话是能找到自己相应Qt版本其他人静态编译好的成果，比如本次汇编器发布所用的静态Qt版本我是从&lt;a href=&quot;http://www.qtcn.org/bbs/thread-htm-fid-68.html&quot;&gt;这里&lt;/a&gt;找到的。&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;法二：很费时间也可能会出现一系列问题的方法，就是自己去用minGW静态编译，具体可以看一下&lt;a href=&quot;http://blog.csdn.net/wsj18808050/article/details/50909381&quot;&gt;这篇博文&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;法三：把人家弄好的虚拟机环境下载下来，在虚拟机里面编译。可以戳这个&lt;a href=&quot;http://blog.csdn.net/wsj18808050/article/details/50935343&quot;&gt;链接&lt;/a&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;步骤三：在Qt里面进行配置 &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;主要是人工建立静态编译环境，具体仍然可以参考上面的博文，我在这里贴上自己的配置（先戳进工具里面的选项一栏）：&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;&lt;img src=&quot;http://ww1.sinaimg.cn/mw690/005INZAsgw1f36q1lbbhdj30rk0gq76c.jpg&quot; alt=&quot;套件&quot;&gt;
&amp;emsp;&amp;emsp;&lt;img src=&quot;http://ww1.sinaimg.cn/mw690/005INZAsgw1f36q1lqnf9j30rk0gqabt.jpg&quot; alt=&quot;版本&quot;&gt;
&amp;emsp;&amp;emsp;&lt;img src=&quot;http://ww4.sinaimg.cn/mw690/005INZAsgw1f36q1mp5i0j30rk0gqdhx.jpg&quot; alt=&quot;编译器&quot;&gt;
&amp;emsp;&amp;emsp;&lt;img src=&quot;http://ww2.sinaimg.cn/mw690/005INZAsgw1f36q1n8jzuj30rk0gqjt0.jpg&quot; alt=&quot;Debug&quot;&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;步骤四：新建静态项目&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;这里只要注意一点点就行了，就是在建立项目的时候选择静态version:&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;&lt;img src=&quot;http://ww2.sinaimg.cn/mw690/005INZAsgw1f36q1nrxqpj30p20cj0tb.jpg&quot; alt=&quot;新建&quot;&gt;
&amp;emsp;&amp;emsp;在这里有另一个值得注意的是：Debug的话最好在动态编译环境完成，因为静态编译出来的debug太大了，所以最后发布时候一定要以release的方式构建:)&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;步骤五：get .exe应用程序&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;最后你可以在release的文件夹中找到.exe文件，此时已经可以在别人家的电脑上运行了~&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;&lt;img src=&quot;http://ww3.sinaimg.cn/mw690/005INZAsgw1f35qiiy7cjj30tg0ltn0f.jpg&quot; alt=&quot;汇编器&quot;&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;写在最后：静态编译千万别浪费时间在VS上调用QT了！这是个大坑：( 笔者就是因为这样才浪费了大把时间走了弯路。&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/static/&quot;&gt;Qt 静态编译&lt;/a&gt; was originally published by Haojie PAN at &lt;a href=&quot;&quot;&gt;My SCARLET&lt;/a&gt; on April 23, 2016.&lt;/p&gt;
  </content>
</entry>


<entry>
  <title type="html"><![CDATA[Reasons to write]]></title>
 <link rel="alternate" type="text/html" href="/reasons/" />
  <id>/reasons</id>
  <published>2016-04-22T00:00:00+00:00</published>
  <updated>2016-04-22T00:00:00+00:00</updated>
  <author>
    <name>Haojie PAN</name>
    <uri></uri>
    <email>3140102237@zju.edu.cn</email>
  </author>
  <content type="html">
    &lt;p&gt;&amp;emsp;&amp;emsp;最早想写博客的想法是15年我开始学Python那会，那时候刚接触网路爬虫，需要调用不同的库，beautiful soap, requests, selenium, sqlite3, etc. 当时就觉得这么多api无法靠记来完成，而在实际coding的过程中，遇到了一些官方文档中无法解决的问题，各种查询之后才debug成功，但由于没有记录下来，导致以后再次遇到忘记了解决之法。&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;比如Sqlite3当初使用过程中有这么一个句子：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;cursor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;SELECT name FROM db WHERE id = ?&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;当初怎么都debug不出来到底为何错了（因为还没学数据库），最后去stackoverflow搜罗了好久答案才知道就算只有一个元素也要以元组的方式插入：&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;span class=&quot;n&quot;&gt;cursor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;SELECT name FROM db WHERE id = ?&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&amp;emsp;&amp;emsp;然而在到后来在用Python通信mysql的时候又犯了同样的错误，又花费了一点时间，于是想想如果有个专门的平台给自己做记录用还是不错的。&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;后来我用上了印象笔记，尽管在生活上整理一些琐碎的事务它的确帮了我很大的忙，但实话说想要记录技术博文的话实在不合我的胃口。&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;另外就是一些专门的国内博客网站，曾经生过在上面写博文的想法，但是看到那个网页玲琅满目的条目和广告，作为一个对界面美观和整洁度有一定洁癖的人来说，的确是难以忍受的。于是我又想去学python的django等框架、学一些前端的东西然后建立一个独立博客，但由于不是自己的专业喜好以及平时学业的繁忙，一直都没有付诸实践。&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;最后是在查询RNN相关博文时看到了 &lt;a href=&quot;http://colah.github.io/&quot;&gt;colah的博客&lt;/a&gt;，非常整洁和美观，又看到了github.io的后缀名，知道了github托管静态网页，就觉得这正是我想要的。&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;所以这个博客主要是记录我在学习中所碰到的一些情况，为未来碰到同样情况的我自己和一些能够发现这个博客的人做一个前车之鉴吧。&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;同时也会记录一些生活的点滴，做一个伪文学爱好者。&lt;/p&gt;

&lt;p&gt;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;2016/04/22&lt;/p&gt;

    &lt;p&gt;&lt;a href=&quot;/reasons/&quot;&gt;Reasons to write&lt;/a&gt; was originally published by Haojie PAN at &lt;a href=&quot;&quot;&gt;My SCARLET&lt;/a&gt; on April 22, 2016.&lt;/p&gt;
  </content>
</entry>

</feed>
